<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pair Programming â€” SkillSprint</title>

  <!-- Google Fonts: Poppins -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Your variables.css (already uploaded) -->
  <link rel="stylesheet" href="assets/css/variables.css?v=2">

  <!-- Navbar CSS (Platform Standard) -->
  <link rel="stylesheet" href="assets/css/navbar.css">

  <!-- Page CSS -->
  <link rel="stylesheet" href="assets/css/pair-programming.css?v=2">

  <!-- Pair Programming Overrides -->
  <link rel="stylesheet" href="assets/css/pair-programming-overrides.css">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- CodeMirror 5 (simple, reliable) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/javascript/javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/xml/xml.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/python/python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/clike/clike.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/php/php.min.js"></script>
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/material-darker.min.css" />

</head>

<body>
  <div class="pp-wrapper">
    <!-- NAVBAR (Platform Standard) -->
    <nav class="navbar">
      <div class="navbar-container">
        <div class="navbar-top">
          <div class="nav-left">
            <a href="dashboard.html" class="brand brand-interactive"
              onclick="event.preventDefault(); window.history.back();" title="Back to Dashboard">
              <div class="brand-logo">
                <i class="fa-solid fa-code context-icon"></i>
                <i class="fa-solid fa-arrow-left-long back-icon"></i>
              </div>
              <span class="brand-name">SkillSprint</span>
            </a>
            <div class="page-indicator">
              <span class="status-dot"></span>
              <span id="projectName">Pair Programming</span>
            </div>
          </div>

          <div class="nav-center">
            <!-- Quick file switcher could go here -->
          </div>

          <div class="nav-right">
            <!-- Session Status -->
            <div class="session-status" id="sessionStatus">
              <span class="status-dot"></span>
              <span class="status-text">Live</span>
            </div>

            <!-- Collaboration Presence -->
            <div class="collab-presence" id="collabPresence"></div>

            <button id="inviteBtn" class="icon-btn" title="Invite Collaborators">
              <i class="fa-solid fa-user-plus"></i>
            </button>
            <button id="shareBtn" class="icon-btn" title="Share Link">
              <i class="fa-solid fa-share-nodes"></i>
            </button>
            <button id="helpBtn" class="icon-btn" title="Help">
              <i class="fa-solid fa-circle-question"></i>
            </button>
            <button id="themeToggle" class="icon-btn" title="Toggle Theme">
              <i class="fa-solid fa-moon"></i>
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- TABS -->
    <div class="tabs-bar" id="tabsBar">
      <div class="tabs" id="tabs"></div>
      <button id="newFileBtn" class="btn small">Add New</button>
    </div>

    <!-- MAIN BODY -->
    <div class="body">
      <!-- LEFT: Folder Area -->
      <aside class="folder-area">
        <div class="explorer-header">
          <div>Explorer</div>
          <div style="display: flex; gap: 8px;">
            <button id="addFileBtn" class="btn-icon" title="New File"><i
                class="fa-solid fa-file-circle-plus"></i></button>
            <button id="addFolderBtn" class="btn-icon" title="New Folder"><i
                class="fa-solid fa-folder-plus"></i></button>
            <!-- <button class="dots" title="More options"><i class="fa-solid fa-ellipsis"></i></button> -->
          </div>
        </div>
        <div id="fileTree" class="file-tree"></div>
      </aside>

      <!-- CENTER: Code Area -->
      <main class="code-area">
        <div id="editorHeader" class="editor-header">
          <div id="activeFilename">src/index.js</div>
          <div class="editor-actions">
            <button id="saveBtn" class="btn small">Save (Ctrl+S)</button>
            <button id="runCodeBtn" class="btn small">Run</button>

          </div>
        </div>
        <div id="editorContainer" class="editor-container"></div>

        <!-- TERMINAL PANEL -->
        <div id="terminalPanel" class="terminal-panel">
          <div class="terminal-header">
            <span><i class="fa-solid fa-terminal"></i> Terminal</span>
            <button id="terminalToggle" class="btn-icon" title="Expand/Collapse">
              <i class="fa-solid fa-chevron-down"></i>
            </button>
          </div>
          <div id="terminalContent" class="terminal-content">
            <div id="terminalOutput"></div>
            <div class="terminal-input-line">
              <span class="terminal-prompt">$</span>
              <input type="text" id="terminalInput" class="terminal-input"
                placeholder="Type command or view output..." />
            </div>
          </div>
        </div>

        <!-- <div id="codeOutput" 
            style="background:#222; color:#eee; font-family: monospace; padding: 12px; height: 150px; overflow-y: auto; white-space: pre-wrap;">
        </div> -->
      </main>

      <!-- RIGHT: Comments panel (slides) -->
      <aside id="commentsPanel" class="comments-panel">
        <div class="comments-header">
          <div>Discussion</div>
          <button id="closeComments" class="btn small">Close</button>
        </div>
        <div id="commentsList" class="comments-list"></div>

        <div class="comments-input">
          <input id="commentText" placeholder="Write a comment..." />
          <button id="sendComment" class="btn accent">Send</button>
        </div>
      </aside>

    </div>

    <!-- Context Menu -->
    <ul id="contextMenu" class="context-menu hidden">
      <li data-action="new-file">New File</li>
      <li data-action="new-folder">New Folder</li>
      <li data-action="rename">Rename</li>
      <li data-action="delete">Delete</li>
    </ul>

    <!-- Invite Modal -->
    <div id="inviteModal" class="input-modal">
      <div class="input-box invite-box" style="width: 500px; max-width: 90%;">
        <h3><i class="fa-solid fa-user-plus"></i> Invite Collaborator</h3>

        <div style="margin-bottom: 20px;">
          <label
            style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 8px; color: var(--text-dark);">
            Search Users
          </label>
          <input type="text" id="inviteSearch" placeholder="Type name or email to search..."
            style="margin-bottom: 0;" />
          <p style="font-size: 11px; color: var(--text-light); margin: 6px 0 0 0;">
            Search from your connections or all platform users
          </p>
        </div>

        <div id="inviteUserList" class="user-list"
          style="max-height: 280px; overflow-y: auto; margin-bottom: 20px; border: 1px solid #eee; border-radius: 8px; background: #f9f9f9;">
          <div style="padding: 40px 20px; text-align: center; color: #999;">
            <i class="fa-solid fa-magnifying-glass" style="font-size: 32px; margin-bottom: 12px; opacity: 0.3;"></i>
            <p style="margin: 0; font-size: 13px;">Start typing to search users</p>
          </div>
        </div>

        <div style="margin-bottom: 20px;">
          <label
            style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 8px; color: var(--text-dark);">
            <i class="fa-solid fa-shield-halved"></i> Permission Level
          </label>
          <select id="invitePermission"
            style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ddd; font-size: 14px;">
            <option value="viewer">View Only - Can see code but not edit</option>
            <option value="editor" selected>Can Edit - Full read/write access to files</option>
          </select>
          <p style="font-size: 11px; color: var(--text-light); margin: 6px 0 0 0;">
            You can change permissions later from the board settings
          </p>
        </div>

        <div class="input-actions">
          <button id="sendInviteBtn" class="btn-ok" disabled>
            <i class="fa-solid fa-paper-plane"></i> Send Invite
          </button>
          <button class="btn-cancel btn-close-invite">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Share Modal -->
    <div id="shareModal" class="input-modal">
      <div class="input-box share-box" style="width: 500px; max-width: 90%;">
        <h3><i class="fa-solid fa-share-nodes"></i> Share Board Link</h3>

        <div style="background: linear-gradient(135deg, rgba(220, 239, 98, 0.1) 0%, transparent 100%); 
                    padding: 16px; border-radius: 8px; margin-bottom: 20px; border-left: 3px solid var(--accent);">
          <p style="margin: 0; font-size: 13px; line-height: 1.6; color: var(--text-dark);">
            <i class="fa-solid fa-info-circle" style="color: var(--accent);"></i>
            <strong>Public Link Sharing:</strong> Anyone with this link can access the board with the selected
            permissions.
            The link never expires unless you regenerate it.
          </p>
        </div>

        <div style="margin-bottom: 20px;">
          <label
            style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 8px; color: var(--text-dark);">
            <i class="fa-solid fa-shield-halved"></i> Link Permission
          </label>
          <select id="sharePermission"
            style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ddd; font-size: 14px;">
            <option value="viewer">View Only - Read-only access to all files</option>
            <option value="editor">Can Edit & Run - Full collaboration access</option>
          </select>
        </div>

        <div style="margin-bottom: 20px;">
          <label
            style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 8px; color: var(--text-dark);">
            Share Link
          </label>
          <div style="display: flex; gap: 8px;">
            <input type="text" id="shareLinkInput" readonly value="Generating link..."
              style="background: #f5f5f5; color: #333; font-family: monospace; font-size: 12px; flex: 1;" />
            <button id="copyShareLinkBtn" class="btn accent" style="white-space: nowrap;">
              <i class="fa-solid fa-copy"></i> Copy
            </button>
          </div>
        </div>

        <div class="input-actions">
          <button class="btn-cancel btn-close-share">Close</button>
        </div>
      </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="input-modal">
      <div class="input-box help-box">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
          <h2 style="margin:0; font-size:1.4rem;">Pair Programming Guide</h2>
          <button class="btn-close-help"
            style="background:none; border:none; font-size:1.5rem; cursor:pointer; color:#666;">&times;</button>
        </div>

        <div class="help-content" style="text-align:left; max-height:60vh; overflow-y:auto; padding-right:10px;">
          <p>Welcome to the <strong>SkillSprint Pair Programming</strong> environment!</p>

          <h3 style="margin-top:15px; font-size:1.1rem; border-bottom:1px solid #eee; padding-bottom:5px;"><i
              class="fa-solid fa-rocket" style="margin-right:8px;"></i>1. How to Start</h3>
          <ul style="padding-left:20px; margin:10px 0;">
            <li><strong>Open a Workspace:</strong> Select a board from the Dashboard or Library.</li>
            <li><strong>Invite Peers:</strong> Use the "Invite" or "Share" buttons top-right.</li>
          </ul>

          <h3 style="margin-top:15px; font-size:1.1rem; border-bottom:1px solid #eee; padding-bottom:5px;"><i
              class="fa-solid fa-file-code" style="margin-right:8px;"></i>2. Files & Naming</h3>
          <p>You <strong>MUST</strong> use correct extensions for features to work:</p>
          <ul style="padding-left:20px; margin:10px 0;">
            <li><code>.js</code> - JavaScript (Runs with Node.js)</li>
            <li><code>.py</code> - Python (Runs with Python 3)</li>
            <li><code>.php</code> - PHP (Runs with PHP CLI)</li>
            <li><code>.html</code> / <code>.css</code> - Syntax highlighting only</li>
          </ul>

          <h3 style="margin-top:15px; font-size:1.1rem; border-bottom:1px solid #eee; padding-bottom:5px;"><i
              class="fa-solid fa-laptop-code" style="margin-right:8px;"></i>3. Using the Editor</h3>
          <ul style="padding-left:20px; margin:10px 0;">
            <li><strong>Edit:</strong> Click a file to open. Tabs let you switch files.</li>
            <li><strong>Save:</strong> Press <code>Ctrl+S</code> or click Save. <strong>Always save before
                running!</strong></li>
          </ul>

          <h3 style="margin-top:15px; font-size:1.1rem; border-bottom:1px solid #eee; padding-bottom:5px;"><i
              class="fa-solid fa-play" style="margin-right:8px;"></i>4. Running Code</h3>
          <p>To execute JS, Python, or PHP:</p>
          <ol style="padding-left:20px; margin:10px 0;">
            <li>Select the file.</li>
            <li>Ensure it is Saved.</li>
            <li>Click <strong>Run</strong> in the toolbar.</li>
            <li>Check the output panel at the bottom.</li>
          </ol>
          <p><em>(Max execution time: 5 seconds)</em></p>

          <h3 style="margin-top:15px; font-size:1.1rem; border-bottom:1px solid #eee; padding-bottom:5px;"><i
              class="fa-solid fa-wrench" style="margin-right:8px;"></i>5. Environment Setup</h3>
          <p>If you see "Command Not Found" or "Interpreter Not Found" in the terminal:</p>
          <ul style="padding-left:20px; margin:10px 0;">
            <li><strong>Node.js (JS):</strong> Ensure Node.js is installed on the host machine.</li>
            <li><strong>Python (.py):</strong> Install Python from python.org and add it to your <strong>System
                PATH</strong>.</li>
            <li><strong>PHP (.php):</strong> Install PHP CLI and ensure <code>php</code> works in your system's
              CMD/PowerShell.</li>
            <li><strong>Refresh:</strong> If you just installed an interpreter, restart the SkillSprint server to detect
              it.</li>
          </ul>

          <h3 style="margin-top:15px; font-size:1.1rem; border-bottom:1px solid #eee; padding-bottom:5px;"><i
              class="fa-solid fa-triangle-exclamation" style="margin-right:8px;"></i>Limitations</h3>
          <ul style="padding-left:20px; margin:10px 0;">
            <li>No internet access for code execution.</li>
            <li>No installing external packages via terminal.</li>
            <li>Secure sandbox environment.</li>
          </ul>
        </div>

        <div class="input-actions" style="margin-top:20px;">
          <button class="btn-ok btn-close-help-action">Got it!</button>
        </div>
      </div>
    </div>


    <!-- Floating button to open comments -->
    <button id="toggleComments" class="fab"><i class="fa-solid fa-comment"></i></button>

  </div>

  <!-- Page JS -->
  <!-- Page JS -->
  <script src="js/custom-dialog.js"></script>
  <script src="js/config.js"></script>
  <script src="js/pair-programming.js?v=2" type="module"></script>
  <script src="js/toast.js"></script>

</body>

</html>